@model old_phone.ViewModels.HomepageViewModel
@{
    ViewBag.Title = "Trang Chủ";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@* --- PHẦN 1: BANNER VÀ GIỚI THIỆU (Phần Tĩnh) --- *@
<div class="row d-flex justify-content-evenly align-items-center mb-4">
    @* SLide Banner *@
    <div class="col-12 col-xl-7 animate__animated animate__zoomIn">
        <div class="border border-3 border-light rounded-4 overflow-hidden shadow-sm">
            <div class="carousel slide" id="index_banner" data-bs-ride="carousel">
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        @* Ảnh mẫu từ Cloudinary *@
                        <img loading="lazy" src="https://res.cloudinary.com/df5mtvzkn/image/upload/WEB_SELL_PHONE__PROJECT/TEST/Test_IMG/eg_phone.png" class="d-block w-100" style="height: 400px; object-fit: cover;" alt="Banner 1">
                    </div>
                    <div class="carousel-item">
                        <img loading="lazy" src="https://res.cloudinary.com/df5mtvzkn/image/upload/WEB_SELL_PHONE__PROJECT/TEST/Test_IMG/eg_phone.png" class="d-block w-100" style="height: 400px; object-fit: cover;" alt="Banner 2">
                    </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-slide="prev" data-bs-target="#index_banner">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-slide="next" data-bs-target="#index_banner">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                </button>
            </div>
        </div>
    </div>

    @* GT WEB *@
    <div class="col-12 col-xl-4 mt-3 mt-xl-0 d-flex align-items-center animate__animated animate__zoomIn">
        <div class="card border-2 main-border rounded-4 shadow-sm h-100">
            <div class="card-body text-center">
                <i class="bi bi-emoji-smile-fill text-warning display-1 mb-3"></i>
                <h3 class="fw-semibold text-main-CL mb-3">Welcome to SellPhone TA!</h3>
                <p class="text-justify">Nơi cung cấp điện thoại chính hãng, giá tốt nhất cho sinh viên. Bảo hành uy tín, hậu mãi tận tâm.</p>
            </div>
        </div>
    </div>
</div>

@* --- PHẦN 2: HOT SALE (Dữ liệu động từ Model.HotSales) --- *@
<div class="container-fluid mt-5 px-0 px-xl-2 border-danger rounded-5 animate__animated animate__zoomIn">
    <div class="text-center text-uppercase">
        <span class="fs-2 fw-semibold text-main-CL"><i class="bi bi-fire me-2"></i>Giảm giá sốc</span>
    </div>

    <div class="card container-fluid main-border border-2 rounded-bottom-5 rounded-top-0 bg-light">
        <div class="px-2 py-3 row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-6 g-5 g-md-3 px-5 px-sm-0">
            @if (Model.HotSales != null)
            {
                foreach (var item in Model.HotSales)
                {
                    @Html.Partial("_SaleCard", item);
                }
            }
            else
            {
                <div class="col-12 text-center py-5">
                    <p class="text-muted">Chưa có sản phẩm khuyến mãi nào.</p>
                </div>
            }

        </div>
        <div class="text-center py-3">
            <a href="@Url.Action("Index", "Product", new { filter = "sale" })" class="btn btn-outline-primary rounded-pill px-4">
                Xem tất cả Sale <i class="bi bi-arrow-right"></i>
            </a>
        </div>
    </div>
</div>

@* --- PHẦN 3: SẢN PHẨM NỔI BẬT (Dữ liệu động từ Model.FeaturedPhones) --- *@
<div class="container-fluid mt-5 px-0 px-xl-2 main-border rounded-5 animate__animated animate__zoomIn">
    <div class="row main-bg-color g-0 text-light rounded-top-5">
        <div class="col text-center text-capitalize">
            <span class="fs-2 fw-semibold ms-4 text-main-CL">
                <i class="bi bi-star-fill me-2 text-main-CL"></i>
                SẢN PHẨM NỔI BẬT
            </span>
        </div>
    </div>

    <div class="card container-fluid main-border border-2 rounded-bottom-5 rounded-top-0 bg-light">
        <div class="px-2 py-3 row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-6 g-5 g-md-3 px-5 px-sm-0">

            @if (Model.FeaturedPhones != null && Model.FeaturedPhones.Any())
            {
                foreach (var item in Model.FeaturedPhones)
                {
                    @Html.Partial("_VariantCard", item);
                }
            }
            else
            {
                <div class="col-12 text-center py-5">
                    <p class="text-muted">Đang cập nhật sản phẩm...</p>
                </div>
            }
        </div>
        <div class="text-center py-3">
            <a href="@Url.Action("Index", "Product")" class="btn btn-outline-primary rounded-pill px-4">
                Xem kho máy <i class="bi bi-phone"></i>
            </a>
        </div>
    </div>
</div>

@* --- PHẦN 4: BLOG (Dữ liệu động từ Model.Blogs) --- *@
<div class="container-fluid mt-5 px-0 px-xl-3 main-border rounded-5 animate__animated animate__zoomIn mb-5">
    <div class="row main-bg-color g-0 text-light rounded-top-5">
        <div class="col text-center text-capitalize">
            <span class="fs-2 fw-semibold ms-4 text-main-CL">
                <i class="bi bi-newspaper me-2"></i>TIN TỨC CÔNG NGHỆ
            </span>
        </div>
    </div>
    <div class="card main-border border-2 rounded-bottom-5 rounded-top-0">
        <div class="px-2 py-3 row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-5 g-3">

            @if (Model.Blogs != null && Model.Blogs.Any())
            {
                foreach (var blog in Model.Blogs) { @Html.Partial("_ArticleCard", blog); }
            }
            else
            {
                <div class="col-12 text-center py-5">
                    <p class="text-muted">Chưa có bài viết nào.</p>
                </div>
            }
        </div>
        <div class="text-center py-3">
            <a href="@Url.Action("Index", "Blog")" class="btn btn-outline-primary rounded-pill px-4">
                Đọc thêm tin tức <i class="bi bi-arrow-right"></i>
            </a>
        </div>
    </div>
</div>